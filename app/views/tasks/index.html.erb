<p><%= t('view.index.list') %></p>
<p><%= notice %></p>

<p><%= t('view.index.search_task') %></p>
<%= form_with(model: Task.new, method: :get, url: tasks_path, local: true) do |form| %>
  <%= form.label :name %>
  <%= form.text_field :name %>
  <%= form.select :status, Task.statuses.keys, include_blank: true, selected: '' %>
  <%= form.hidden_field :search, value: 'true' %>
  <%= form.submit %>
<% end %>

<table>
  <thead>
  <tr>
    <th><%= t('view.name') %></th>
    <th><%= t('view.detail') %></th>
    <th><%= t('view.expired_at') %></th>
    <th><%= t('view.created_at') %></th>
    <th><%= t('view.status') %></th>
    <th><%= t('view.priority') %></th>
  </tr>
  </thead>

  <tbody>
    <%= link_to t('view.index.sort_expired'), tasks_path(sort_expired: "true") %>
    <%= link_to t('view.index.sort_priority'), tasks_path(sort_priority: "true") %>
    <% @tasks.each do |task| %>
      <tr>
        <td><%= task.name %></td>
        <td><%= task.detail %></td>
        <td><%= task.expired_at %></td>
        <td><%= task.created_at.strftime("%Y-%m-%d %H:%M:%S") %></td>
        <td><%= task.status %></td>
        <td><%= task.priority %></td>

        <td><%= link_to t('view.show_task_detail'), task_path(task.id) %></td>
        <td><%= link_to t('view.edit_task'), edit_task_path(task.id) %></td>
        <td><%= link_to t('view.destroy_task'), task_path(task.id), method: :delete, data: { confirm: "本当に削除していいですか？"} %></td>
      </tr>
    <% end %>
  </tbody>
</table>
<%= link_to t('view.go_to_top'), root_path %>
<%= link_to t('view.create_task'), new_task_path %>
<%= paginate @tasks %>
<%= page_entries_info @tasks %>
